{"version":3,"sources":["webpack:///webpack/bootstrap 40fb9d6ad779780d3a9e","webpack:///./src/event-handler.ts","webpack:///./spec/in-browser/index.js","webpack:///./spec/unit .spec$","webpack:///./spec/unit/event-handler.spec.ts","webpack:///./spec/unit/fn-queue.spec.ts","webpack:///./src/index.ts","webpack:///./src/fn-queue.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;ACvDA;IAUE,sBAAY,KAAW;QACrB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;IACtC,CAAC;IAUO,iCAAU,GAAlB;QACE,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACvE,WAAW,EAAE;IAClB,CAAC;IAUD,2BAAI,GAAJ,UAAK,SAAiB,EAAE,IAAU;QAChC,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACtC,EAAE,EAAC,MAAM,CAAC,CAAC,CAAC;YACV,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YACnC,CAAC;QACH,CAAC;IACH,CAAC;IAUD,gCAAS,GAAT,UAAU,SAAiB,EAAE,EAAY;QACvC,EAAE,EAAC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;QAC9B,CAAC;QACD,EAAE,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QACtC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAClC,CAAC;IAUD,kCAAW,GAAX,UAAY,SAAiB,EAAE,EAAY;QACzC,EAAE,EAAC,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAAC,CAAC;QAClC,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC1B,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtD,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;oBAClE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACpC,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IACH,mBAAC;AAAD,CAAC;AAhFY,oCAAY;;;;;;;;ACLzB;AACA;;AAEA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sB;;;;;;;;;AClBA,6CAAuD;AAKvD,QAAQ,CAAC,cAAc,EAAE;IAEvB,EAAE,CAAC,mBAAmB,EAAE;QACtB,IAAI,YAAY,GAAG,IAAI,4BAAY,EAAE,CAAC;QACtC,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,IAAI,KAAK,GAAG;YACV,CAAC,GAAG,EAAE,CAAC;QACT,CAAC,CAAC;QACF,YAAY,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACtC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1B,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;IACxB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,yCAAyC,EAAE;QAC5C,IAAI,YAAY,GAAG,IAAI,4BAAY,EAAE,CAAC;QACtC,IAAI,KAAK,GAAG,cAAO,CAAC,CAAC;QACrB,YAAY,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACtC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QACrD,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzD,YAAY,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACxC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,4DAA4D,EAAE;QAC/D;YAGE;gBADQ,WAAM,GAAW,CAAC,CAAC;gBAEzB,IAAI,CAAC,YAAY,GAAG,IAAI,4BAAY,CAAC,IAAI,CAAC,CAAC;YAC7C,CAAC;YAEO,mCAAiB,GAAzB,UAA0B,IAAI;gBAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACrB,CAAC;YAED,oCAAkB,GAAlB;gBACE,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACnE,CAAC;YAED,sCAAoB,GAApB;gBACE,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACrE,CAAC;YAED,wBAAM,GAAN,UAAO,GAAW;gBAChB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;gBAChB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;YAC3C,CAAC;YACH,cAAC;QAAD,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;QAC5B,OAAO,CAAC,kBAAkB,EAAE,CAAC;QAC7B,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACpB,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACvC,OAAO,CAAC,oBAAoB,EAAE,CAAC;QAC/B,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACpB,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACvC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;AC9DH,mCAImB;AAKnB,QAAQ,CAAC,SAAS,EAAE;IAIlB,QAAQ,CAAC,gBAAgB,EAAE;QACzB,EAAE,CAAC,yDAAyD,EAAE;YAC5D,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACjD,UAAU,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC;YACrC,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAKH,QAAQ,CAAC,QAAQ,EAAE;QACjB,EAAE,CAAC,0DAA0D,EAAE;YAC7D,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,IAAI,KAAK,GAAG,cAAO,CAAC,CAAC;YACrB,IAAI,KAAK,GAAG,cAAO,CAAC,CAAC;YACrB,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvB,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvB,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC9C,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAKH,QAAQ,CAAC,oBAAoB,EAAE;QAC7B,EAAE,CAAC,2CAA2C,EAAE,UAAC,IAAI;YACnD,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACvC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACxB,IAAI,EAAE,CAAC;YACT,CAAC,CAAC,CAAC;YACH,IAAI,KAAK,GAAG;gBACV,GAAG,EAAE,CAAC;gBACN,UAAU,CAAC,IAAI,EAAE,CAAC;YACpB,CAAC,CAAC;YACF,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,UAAC,IAAI;YACvD,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACvC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACxB,IAAI,EAAE,CAAC;YACT,CAAC,CAAC,CAAC;YACH,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,GAAG,GAAG,EAAE,CAAC;gBACT,EAAE,EAAE,CAAC;YACP,CAAC,CAAC;YACF,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,GAAG,GAAG,EAAE,CAAC;gBACT,EAAE,EAAE,CAAC;YACP,CAAC,CAAC;YACF,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvB,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,UAAC,IAAI;YAClD,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACvC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACxB,IAAI,EAAE,CAAC;YACT,CAAC,CAAC,CAAC;YACH,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,GAAG,EAAE,CAAC;gBACN,EAAE,EAAE,CAAC;YACP,CAAC,CAAC;YACF,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8DAA8D,EAAE,UAAC,IAAI;YACtE,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,IAAI,eAAe,GAAG,KAAK,CAAC;YAC5B,IAAI,UAAU,GAAG,IAAI,aAAO,CAAC,IAAI,EAAE,EAAE,gBAAgB,EAAE,GAAG,EAAE,CAAC,CAAC;YAC9D,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,gBAAgB,EAAE;gBAChD,eAAe,GAAG,IAAI,CAAC;YACzB,CAAC,CAAC,CAAC;YACH,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACvC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACxB,MAAM,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACtC,IAAI,EAAE,CAAC;YACT,CAAC,CAAC,CAAC;YACH,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,GAAG,EAAE,CAAC;YAER,CAAC,CAAC;YACF,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,UAAU,CAAC;oBACT,GAAG,EAAE,CAAC;oBACN,EAAE,EAAE,CAAC;gBACP,CAAC,EAAE,EAAE,CAAC,CAAC;YACT,CAAC,CAAC;YACF,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvB,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAKH,QAAQ,CAAC,QAAQ,EAAE;QACjB,EAAE,CAAC,gDAAgD,EAAE,UAAC,IAAI;YACxD,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACvC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACxB,IAAI,EAAE,CAAC;YACT,CAAC,CAAC,CAAC;YACH,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,UAAU,CAAC;oBACT,GAAG,EAAE,CAAC;oBACN,EAAE,EAAE,CAAC;gBACP,CAAC,EAAE,GAAG,CAAC,CAAC;YACV,CAAC,CAAC;YACF,IAAI,KAAK,GAAG,UAAC,EAAE;gBACb,UAAU,CAAC;oBACT,GAAG,EAAE,CAAC;oBACN,EAAE,EAAE,CAAC;gBACP,CAAC,EAAE,GAAG,CAAC,CAAC;YACV,CAAC,CAAC;YACF,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvB,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC1B,UAAU,CAAC;gBACT,UAAU,CAAC,IAAI,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,CAAC,CAAC;QACT,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAKH,QAAQ,CAAC,MAAM,EAAE;QACf,EAAE,CAAC,+BAA+B,EAAE;YAClC,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,UAAU,CAAC,EAAE,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACrC,GAAG,EAAE,CAAC;YACR,CAAC,CAAC,CAAC;YACH,UAAU,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,CAAC,CAAC;YACzD,UAAU,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,CAAC,CAAC;YACzD,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAKH,QAAQ,CAAC,QAAQ,EAAE;QACjB,EAAE,CAAC,kCAAkC,EAAE;YACrC,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,IAAI,UAAU,GAAG,IAAI,aAAO,EAAE,CAAC;YAC/B,UAAU,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE;gBACvC,GAAG,EAAE,CAAC;YACR,CAAC,CAAC,CAAC;YACH,UAAU,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,CAAC,CAAC;YACzD,UAAU,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,CAAC,CAAC;YACzD,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAQH,QAAQ,CAAC,iBAAiB,EAAE;IAC1B,EAAE,CAAC,qCAAqC,EAAE,UAAC,IAAI;QAC7C;YAAsB,2BAAe;YAArC;gBAAA,qEAqBC;gBApBQ,SAAG,GAAG,EAAE,CAAC;;YAoBlB,CAAC;YAlBS,8BAAY,GAApB;gBACE,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;YAC5C,CAAC;YAEO,6BAAW,GAAnB;gBAAA,iBAKC;gBAJC,UAAU,CAAC;oBACT,KAAI,CAAC,GAAG,EAAE,CAAC;oBACX,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC,EAAE,EAAE,CAAC,CAAC;YACT,CAAC;YAED,mCAAiB,GAAjB,UAAkB,aAAqB,EAAE,EAAc;gBACrD,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC;oBACtC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBACtC,CAAC;gBACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAe,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBAC/C,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACzB,CAAC;YACH,cAAC;QAAD,CAAC,CArBqB,qBAAe,GAqBpC;QACD,IAAI,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;QAC5B,OAAO,CAAC,iBAAiB,CAAC,EAAE,EAAE;YAC5B,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAChC,IAAI,EAAE,CAAC;QACT,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;;;;;;;;;;;;;ACvNH,iCAA2B;;;;;;;;;;ACA3B,6CAA+C;AAGlC,uBAAe,GAAG;IAC7B,OAAO,EAAE,SAAS;IAClB,gBAAgB,EAAE,kBAAkB;CACrC,CAAC;AAYF;IAaE,iBAAY,KAAW,EAAE,OAAyB;QAZ1C,UAAK,GAAU,EAAE,CAAC;QAClB,oBAAe,GAAY,KAAK,CAAC;QAEjC,qBAAgB,GAAW,IAAI,GAAG,EAAE,CAAC;QAU3C,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAClC,IAAI,CAAC,YAAY,GAAG,IAAI,4BAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjD,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;QACxB,EAAE,EAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;QACnD,CAAC;IACH,CAAC;IAQD,8BAAY,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAQD,sBAAI,GAAJ,UAAK,EAA6B;QAChC,EAAE,EAAC,EAAE,CAAC,CAAC,CAAC;YACN,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACtB,CAAC;IACH,CAAC;IAQD,yBAAO,GAAP,UAAQ,EAA8B;QACpC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACd,EAAE,EAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC;IACH,CAAC;IAOD,sBAAI,GAAJ;QACE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,EAAE,EAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;YAC3B,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACxC,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAe,CAAC,OAAO,CAAC,CAAC;YAChD,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,IAAI,EAAE,GAAa,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACtC,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;gBACpB,IAAI,CAAC,IAAI,EAAE,CAAC;YACd,CAAC,CAAC,CAAC,CAAC;IACN,CAAC;IAQO,0CAAwB,GAAhC;QAAA,iBAKC;QAJC,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC;YACnC,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAe,CAAC,gBAAgB,CAAC,CAAC;YACzD,KAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC5B,CAAC;IAOD,sBAAI,GAAJ;QACE,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IAClB,CAAC;IASD,oBAAE,GAAF,UAAG,SAAiB,EAAE,EAAY;QAChC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC7C,CAAC;IASD,sBAAI,GAAJ,UAAK,SAAiB,EAAE,EAAY;QAApC,iBAMC;QALC,IAAI,MAAM,GAAG,UAAC,IAAI;YAChB,EAAE,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC1B,KAAI,CAAC,YAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QACnD,CAAC,CAAC;QACF,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;IACjD,CAAC;IACH,cAAC;AAAD,CAAC;AA/HY,0BAAO;AA0IpB;IAGE;QAFU,YAAO,GAAY,IAAI,CAAC;QAGhC,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IACH,sBAAC;AAAD,CAAC;AANqB,0CAAe","file":"spec.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 40fb9d6ad779780d3a9e","/**\n * Class to emit events\n * \n * @export\n * @class EventHandler\n */\nexport class EventHandler {\n  private events: any;\n  private scope: any;\n\n  \n  /**\n   * Creates an instance of EventHandler.\n   * @param {*} [scope] The scope \"this\" will apply to\n   * @memberof EventHandler\n   */\n  constructor(scope?: any) {\n    this.events = {};\n    this.scope = (scope) ? scope : null;\n  }\n\n\n  /**\n   * Generate a id\n   * \n   * @private\n   * @returns {string} \n   * @memberof EventHandler\n   */\n  private generateId(): string {\n    return (Date.now().toString(36) + Math.random().toString(36).substr(2, 5))\n      .toUpperCase()\n  }\n\n\n  /**\n   * Emit an event\n   * \n   * @param {string} eventName \n   * @param {*} data \n   * @memberof EventHandler\n   */\n  emit(eventName: string, data?: any) {\n    const events = this.events[eventName];\n    if(events) {\n      for(let i = 0; i < events.length; i++) {\n        events[i].call(this.scope, data);\n      }\n    }\n  }\n\n\n  /**\n   * Subscribe to an event\n   * \n   * @param {string} eventName \n   * @param {Function} fn \n   * @memberof EventHandler\n   */\n  subscribe(eventName: string, fn: Function) {\n    if(!this.events[eventName]) {\n      this.events[eventName] = [];\n    }\n    fn['subscribeId'] = this.generateId();\n    this.events[eventName].push(fn);\n  }\n\n\n  /**\n   * Unsubscribe to an event\n   * \n   * @param {string} eventName \n   * @param {Function} fn \n   * @memberof EventHandler\n   */\n  unsubscribe(eventName: string, fn: Function) {\n    if(!fn['subscribeId']) { return; }\n    if(this.events[eventName]) {\n      for(let i = 0; i < this.events[eventName].length; i++) {\n        if(this.events[eventName][i]['subscribeId'] === fn['subscribeId']) {\n          this.events[eventName].splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/event-handler.ts","\n// Our webpack.unit.tests.config.js file uses this to require all unit test files\n// so they can be tested in a browser for debugging\n\n// require all test files\nvar testsContext = require.context('../unit', true, /.spec$/);\ntestsContext.keys().forEach(testsContext);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./spec/in-browser/index.js\n// module id = 1\n// module chunks = 0","var map = {\n\t\"./event-handler.spec\": 3,\n\t\"./fn-queue.spec\": 4\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./spec/unit .spec$\n// module id = 2\n// module chunks = 0","import { EventHandler } from '../../src/event-handler';\n\n/**\n * EventHandler\n */\ndescribe('EventHandler', () => {\n\n  it('should emit event', () => {\n    let eventHandler = new EventHandler();\n    let a = 10;\n    let fnOne = () => {\n      a = 20;\n    };\n    eventHandler.subscribe('test', fnOne);\n    eventHandler.emit('test');\n    expect(a).toEqual(20);\n  });\n\n  it('should subscribe and unsubscribe events', () => {\n    let eventHandler = new EventHandler();\n    let fnOne = () => {};\n    eventHandler.subscribe('test', fnOne);\n    expect(eventHandler['events']['test']).toBeDefined();\n    expect(eventHandler['events']['test'].length).toEqual(1);\n    eventHandler.unsubscribe('test', fnOne);\n    expect(eventHandler['events']['test'].length).toEqual(0);\n  });\n  \n  it('should subscribe and unsubscribe for function inside class', () => {\n    class MyClass {\n      private eventHandler: EventHandler;\n      private valOne: number = 0;\n      constructor() {\n        this.eventHandler = new EventHandler(this);\n      }\n\n      private listenToValUpdate(data) {\n        this.valOne = data;\n      }\n\n      subscribeTestEvent() {\n        this.eventHandler.subscribe('valUpdate', this.listenToValUpdate);\n      }\n\n      unsubscribeTestEvent() {\n        this.eventHandler.unsubscribe('valUpdate', this.listenToValUpdate);\n      }\n\n      setVal(val: number) {\n        this.valOne = 0;\n        this.eventHandler.emit('valUpdate', val);\n      } \n    }\n\n    let myClass = new MyClass();\n    myClass.subscribeTestEvent();\n    myClass.setVal(100);\n    expect(myClass['valOne']).toEqual(100);\n    myClass.unsubscribeTestEvent();\n    myClass.setVal(200);\n    expect(myClass['valOne']).toEqual(0);\n  });\n});\n\n\n// WEBPACK FOOTER //\n// ./spec/unit/event-handler.spec.ts","import { \n  FnQueue,\n  FnQueueAbstract, \n  FN_QUEUE_EVENTS\n} from '../../src';\n\n/**\n * FnQueue()\n */\ndescribe('FnQueue', () => {\n  /**\n   * isProcessing()\n   */\n  describe('isProcessing()', () => {\n    it('should return the value if the queue is being processed', () => {\n      let fnQueueSrv = new FnQueue();\n      expect(fnQueueSrv.isProcessing()).toEqual(false);\n      fnQueueSrv['processingQueue'] = true;\n      expect(fnQueueSrv.isProcessing()).toEqual(true);\n    });\n  });\n\n  /**\n   * push()\n   */\n  describe('push()', () => {\n    it('should push functions to the queue, but not execute them', () => {\n      let fnQueueSrv = new FnQueue();\n      let fnOne = () => {};\n      let fnTwo = () => {};\n      fnQueueSrv.push(fnOne);\n      fnQueueSrv.push(fnTwo);\n      expect(fnQueueSrv['queue'].length).toEqual(2);\n      expect(fnQueueSrv.isProcessing()).toEqual(false);\n    });\n  });\n\n  /**\n   * execute() & next()\n   */\n  describe('execute() & next()', () => {\n    it('should push function to queue and execute', (done) => {\n      let val = 10;\n      let fnQueueSrv = new FnQueue();\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FLUSHED, () => {\n        expect(val).toEqual(11);\n        done();\n      });\n      let fnOne = () => {\n        val++;\n        fnQueueSrv.next(); \n      };\n      fnQueueSrv.execute(fnOne);\n    });\n\n    it('should execute after other functions in queue', (done) => {\n      let val = 10;\n      let fnQueueSrv = new FnQueue();\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FLUSHED, () => {\n        expect(val).toEqual(15);\n        done();\n      });\n      let fnOne = (cb) => {\n        val = 20;\n        cb();\n      };\n      let fnTwo = (cb) => {\n        val = 15;\n        cb();\n      };\n      fnQueueSrv.push(fnOne);\n      fnQueueSrv.execute(fnTwo);\n    });\n\n    it('should execute and use callback function', (done) => {\n      let val = 10;\n      let fnQueueSrv = new FnQueue();\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FLUSHED, () => {\n        expect(val).toEqual(11);\n        done();\n      });\n      let fnOne = (cb) => {\n        val++;\n        cb();\n      };\n      fnQueueSrv.execute(fnOne);\n    });\n\n    it('should flush queue even know function does not fire callback', (done) => {\n      let val = 10;\n      let fnTimeoutCalled = false;\n      let fnQueueSrv = new FnQueue(null, { maxFnExecuteTime: 100 });\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FUNCTION_TIMEOUT, () => {\n        fnTimeoutCalled = true;\n      });\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FLUSHED, () => {\n        expect(val).toEqual(12);\n        expect(fnTimeoutCalled).toEqual(true);\n        done();\n      });\n      let fnOne = (cb) => {\n        val++;\n        // some error happens and callback is never fired...\n      };\n      let fnTwo = (cb) => {\n        setTimeout(() => {\n          val++;\n          cb();\n        }, 10);\n      };\n      fnQueueSrv.push(fnOne);\n      fnQueueSrv.execute(fnTwo);\n    });\n  });\n\n  /**\n   * kill()\n   */\n  describe('kill()', () => {\n    it('should kill the processing and empty the queue', (done) => {\n      let val = 10;\n      let fnQueueSrv = new FnQueue();\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FLUSHED, () => {\n        expect(val).toEqual(11);\n        done();\n      });\n      let fnOne = (cb) => {\n        setTimeout(() => {\n          val++;\n          cb();\n        }, 100);\n      };\n      let fnTwo = (cb) => {\n        setTimeout(() => {\n          val++;\n          cb();\n        }, 100);\n      };\n      fnQueueSrv.push(fnOne);\n      fnQueueSrv.execute(fnTwo);\n      setTimeout(() => {\n        fnQueueSrv.kill();\n      }, 50);\n    });\n  });\n\n  /**\n   * on()\n   */\n  describe('on()', () => {\n    it('should listen to events fired', () => {\n      let val = 0;\n      let fnQueueSrv = new FnQueue();\n      fnQueueSrv.on(FN_QUEUE_EVENTS.FLUSHED, () => {\n        val++;\n      });\n      fnQueueSrv['eventHandler'].emit(FN_QUEUE_EVENTS.FLUSHED);\n      fnQueueSrv['eventHandler'].emit(FN_QUEUE_EVENTS.FLUSHED);\n      expect(val).toEqual(2);\n    });\n  });\n\n  /**\n   * once()\n   */\n  describe('once()', () => {\n    it('should listen to event only once', () => {\n      let val = 0;\n      let fnQueueSrv = new FnQueue();\n      fnQueueSrv.once(FN_QUEUE_EVENTS.FLUSHED, () => {\n        val++;\n      });\n      fnQueueSrv['eventHandler'].emit(FN_QUEUE_EVENTS.FLUSHED);\n      fnQueueSrv['eventHandler'].emit(FN_QUEUE_EVENTS.FLUSHED);\n      expect(val).toEqual(1);\n    });\n  });\n});\n\n\n\n\n/**\n * FnQueue\n */\ndescribe('FnQueueAbstract', () => {\n  it('should extend FnQueueAbstract class', (done) => {\n    class MyClass extends FnQueueAbstract {\n      public val = 10;\n\n      private queueFlushed() {\n        console.log('Queue flushed: ' + this.val);\n      }\n\n      private increaseVal() {\n        setTimeout(() => {\n          this.val++;\n          this.fnQueue.next();\n        }, 10);\n      }\n\n      increaseValXTimes(numberOftimes: number, cb: () => void) {\n        for(let i = 0; i < numberOftimes; i++) {\n          this.fnQueue.push(this.increaseVal);\n        }\n        this.fnQueue.once(FN_QUEUE_EVENTS.FLUSHED, cb);\n        this.fnQueue.execute();\n      }\n    }\n    let myClass = new MyClass();\n    myClass.increaseValXTimes(10, () => {\n      expect(myClass.val).toEqual(20);\n      done();\n    });\n  });\n});\n\n\n// WEBPACK FOOTER //\n// ./spec/unit/fn-queue.spec.ts","export * from './fn-queue';\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { EventHandler } from './event-handler';\n\n// events fired by the FnQueue Service\nexport const FN_QUEUE_EVENTS = {\n  FLUSHED: 'flushed',\n  FUNCTION_TIMEOUT: 'function-timeout'\n};\n\nexport interface iFnQueueOptions {\n  maxFnExecuteTime?: number;\n}\n\n/**\n * Queue service to execute async functions in a linear manner\n * \n * @export\n * @class FnQueue\n */\nexport class FnQueue {\n  private queue: any[] = [];\n  private processingQueue: boolean = false;\n  private scope: any;\n  private maxFnExecuteTime: number = 1000 * 30; // 30 seconds\n  private fnExecuteTimeoutId: number;\n  private eventHandler: EventHandler;\n\n  /**\n   * Creates an instance of FnQueue.\n   * @param {*} [scope] The scope \"this\" will apply to\n   * @memberof FnQueue\n   */\n  constructor(scope?: any, options?: iFnQueueOptions) {\n    this.scope = (scope) ? scope : {};\n    this.eventHandler = new EventHandler(this.scope);\n    options = options || {};\n    if(options.maxFnExecuteTime) {\n      this.maxFnExecuteTime = options.maxFnExecuteTime;\n    }\n  }\n\n  /**\n   * Determine if the queue is being processed\n   * \n   * @returns {boolean} \n   * @memberof FnQueue\n   */\n  isProcessing(): boolean {\n    return this.processingQueue;\n  }\n\n  /**\n   * Push a function to the queue but do not execute it\n   * \n   * @param {Function} fn \n   * @memberof FnQueue\n   */\n  push(fn: (cb?: () => void) => void) {\n    if(fn) {\n      this.queue.push(fn);\n    }\n  }\n\n  /**\n   * Push a function to the queue and execute it as well\n   * \n   * @param {Function} [fn] \n   * @memberof FnQueue\n   */\n  execute(fn?: (cb?: () => void) => void) {\n    this.push(fn);\n    if(!this.processingQueue) {\n      this.next();\n    }\n  }\n\n  /**\n   * Process the next function in the queue\n   * \n   * @memberof FnQueue\n   */\n  next() {\n    this.processingQueue = true;\n    if(this.fnExecuteTimeoutId) { \n      clearTimeout(this.fnExecuteTimeoutId); \n    }\n    if(this.queue.length < 1) {\n      this.processingQueue = false;\n      this.eventHandler.emit(FN_QUEUE_EVENTS.FLUSHED);\n      return;\n    }\n    this.startMaxExecutionTimeout();\n    let fn: Function = this.queue.shift();\n    let self = this;\n    fn.apply(this.scope, [() => {\n      self.next();\n    }]);\n  }\n\n  /**\n   * Start the timeout that will fire if the async function in the queue\n   * does not fire the next function\n   * \n   * @memberof FnQueue\n   */\n  private startMaxExecutionTimeout() {\n    this.fnExecuteTimeoutId = setTimeout(() => {\n      this.eventHandler.emit(FN_QUEUE_EVENTS.FUNCTION_TIMEOUT);\n      this.next();\n    }, this.maxFnExecuteTime);\n  }\n\n  /**\n   * Kill processing of the queue and empty the queue\n   * \n   * @memberof FnQueue\n   */\n  kill() {\n    this.queue = [];\n  }\n\n  /**\n   * Listen to events\n   * \n   * @param {string} eventName \n   * @param {Function} fn \n   * @memberof FnQueue\n   */\n  on(eventName: string, fn: Function) {\n    this.eventHandler.subscribe(eventName, fn);\n  }\n\n  /**\n   * Listen to an event only once\n   * \n   * @param {stirng} eventName \n   * @param {Function} fn \n   * @memberof FnQueue\n   */\n  once(eventName: string, fn: Function) {\n    let onceFn = (data) => {\n      fn.call(this.scope, data);\n      this.eventHandler.unsubscribe(eventName, onceFn);\n    };\n    this.eventHandler.subscribe(eventName, onceFn);\n  }\n}\n\n\n/**\n * An abstract class that can be extend to add the ability to queue\n * async functions \n * \n * @export\n * @abstract\n * @class FnQueue\n */\nexport abstract class FnQueueAbstract {\n  protected fnQueue: FnQueue = null;\n  \n  constructor() {\n    this.fnQueue = new FnQueue(this);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/fn-queue.ts"],"sourceRoot":""}